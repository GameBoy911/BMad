# BMad 方法指导原则

BMad 方法是一个用于 AI 辅助软件开发的自然语言框架。这些原则确保所有贡献都能维持该方法的有效性。

## 核心原则

### 1. 开发智能体必须精简

- **最小化开发智能体的依赖**：在 IDE 中工作的开发智能体必须拥有最小的上下文开销。
- **为代码节省上下文**：每一行都很重要——开发智能体应专注于编码，而非文档。
- **Web 智能体可以更庞大**：在 Web UI 中使用的规划智能体（如 PRD 编写器、架构师）可以有更复杂的任务和依赖。
- **小文件，按需加载**：多个专注的小文件优于包含许多分支的大文件。

### 2. 自然语言优先

- **一切皆为 Markdown**：智能体、任务、模板——全部用纯英文（或其他自然语言）编写。
- **核心无代码**：框架本身不包含任何编程代码，只有自然语言指令。
- **自包含的模板**：模板被定义为 YAML 文件，其结构化部分包括元数据、工作流配置以及内容生成的详细指令。

### 3. 智能体与任务设计

- **智能体定义角色**：每个智能体都是一个具有特定专业知识的角色（例如，前端开发者、API 开发者）。
- **任务即流程**：智能体为完成工作而遵循的逐步指令。
- **模板即输出**：带有嵌入式生成指令的结构化文档。
- **依赖关系至关重要**：只显式声明所需的内容。

## 实践指南

### 何时添加到核心

- 仅限于通用的软件开发需求。
- 不会增加开发智能体的上下文负担。
- 遵循现有的智能体/任务/模板模式。

### 何时创建扩展包

- 超出软件开发范围的特定领域需求。
- 非技术领域（商业、健康、教育、创意）。
- 专业技术领域（游戏、基础设施、移动端）。
- 包含大量文档或知识库。
- 任何会使核心智能体变得臃肿的内容。

更多详细示例和想法，请参阅[扩展包指南](../docs/expansion-packs.md)。

### 智能体设计规则

1.  **Web/规划智能体**：可以拥有更丰富的上下文、多个任务和详尽的模板。
2.  **开发智能体**：依赖最小化，专注于代码生成，任务集精简。
3.  **所有智能体**：清晰的角色定位，特定的专业知识，明确定义的能力。

### 任务编写规则

1.  编写清晰的、分步的流程。
2.  使用 Markdown 格式以提高可读性。
3.  保持开发智能体任务的专注和简洁。
4.  规划任务可以更详尽。
5.  **优先使用多个小任务，而不是一个大的分支任务**
    -   避免使用一个包含许多条件路径的任务。
    -   创建多个专注的任务供智能体选择。
    -   这样可以保持最小的上下文开销。
6.  **复用通用任务** - 不要创建新的文档创建任务
    -   使用现有的 `create-doc` 任务。
    -   传递包含结构化部分的相应 YAML 模板。
    -   这样可以保持一致性并减少重复。

### 模板规则

模板遵循使用 YAML 格式的 [BMad 文档模板](../common/utils/bmad-doc-template.md) 规范：

1.  **结构**：模板在 YAML 中定义，具有清晰的元数据、工作流配置和层级结构。
2.  **关注点分离**：给 LLM 的指令位于 `instruction` 字段中，与内容分离。
3.  **可复用性**：模板与智能体无关，可在不同智能体之间使用。
4.  **关键组件**：
    -   `template` 块用于元数据（id, name, version, output settings）。
    -   `workflow` 块用于交互模式配置。
    -   `sections` 数组定义文档结构，可包含嵌套的子部分。
    -   每个部分都有 `id`、`title` 和 `instruction` 字段。
5.  **高级功能**：
    -   使用 `{{variable_name}}` 语法进行变量替换。
    -   使用 `condition` 字段实现条件性部分。
    -   使用 `repeatable: true` 实现可重复部分。
    -   使用 `owner` 和 `editors` 字段设置智能体权限。
    -   `examples` 数组用于提供指导（永远不会包含在输出中）。
6.  **干净的输出**：YAML 结构确保所有处理逻辑与生成的内容分离。

## 谨记

-   力量在于自然语言的编排，而不是代码。
-   开发智能体负责编码，规划智能体负责规划。
-   保持开发智能体精简，以实现最高的编码效率。
-   扩展包用于处理专业领域。
